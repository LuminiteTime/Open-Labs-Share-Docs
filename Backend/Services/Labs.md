
### Зачем нужен
Labs Service является центральным хранилищем всех учебных материалов и лабораторных работ в системе. Он обеспечивает единую точку управления образовательным контентом и доступом к файловым ресурсам.

### Функции
- CRUD для лабораторных
- Хранение данных (title, author_id, main_md_id, extra_files, created_at, updated_at, is_open)
- Категоризация и тегирование лабораторных (для поиска и Кирилу)
- Управление доступом к лабораторным
- 

### Основные API
**Для фронтенда через API Gateway:**
- `labs/create` - создание новой лабораторной работы
- `labs/{id}` - получение конкретной лабораторной работы
- `labs/{id}/update` - редактирование существующей работы
- `labs/{id}/delete` - удаление лабораторной работы
- `labs/search` - поиск и фильтрация лабораторных работ
- `labs/upload` - загрузка файлов для лабораторной работы (Продумать flow загрузки лабы)
- `labs/{id}/files` - управление файлами лабораторной работы

**От других микросервисов (gRPC):**

- `GetLabsByAuthor` → получить все работы конкретного автора (для Users Service)
- `UpdateLabRating` → обновить рейтинг лабораторной работы (от Karma Service)
- `GetLabsStats` → статистика по лабораторным работам (для аналитики/Karma)



### Взаимодействие с микросервисами

- **Связь с Users Service:** Валидация авторства лабораторных работ и получение информации о создателях контента
- **Интеграция с Karma Service:** Предоставление данных о качестве и популярности материалов для расчета репутации авторов
- **Поддержка Feedback Service:** Метаданные лабораторных работ для системы отзывов и комментариев
- **Данные для Questionary Service:** Связанные материалы для создания тестов и заданий по лабораторным работам

## **Файловое хранилище**
- **S3/MinIO интеграция:** Безопасное хранение изображений, PDF документов, архивов с кодом
- **Генерация signed URLs:** Временные ссылки для безопасного доступа к файлам
- **Автоматическая оптимизация:** Сжатие изображений и конвертация в web-форматы

### Структуры данных

**Article Entity:**

| Field      | Type          |
| ---------- | ------------- |
| id (PK)    | UUID / long   |
| title      | string        |
| owner_id   | UUID / long   |
| files      | list\<string> |
| short_desc | string        |
| views      | integer       |

**Lab Entity**

| Field         | Type          |
| ------------- | ------------- |
| id (PK)       | UUID / long   |
| title         | string        |
| owner_id      | UUID / long   |
| files         | list\<string> |
| short_desc    | string        |
| views         | integer       |
| people_solved | integer       |
 
### Сохранение данных в S3

```text
Bucket:
user_id
	└── lab_id
		├── asset_file.extension
		├── example.png
		└── content.md
```

Link example: `...\bucket\user_id\lab_id\filename`
